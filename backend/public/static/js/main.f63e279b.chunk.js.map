{"version":3,"sources":["queries/RemoteQuery.js","queries/ShoppingCart.js","queries/Products.js","queries/Units.js","components/AddItemFormComponent.js","components/ShoppingCartComponent.js","components/ProductsRequestComponent.js","components/CheckoutComponent.js","App.js","index.js"],"names":["RemoteQuery","url","init","arguments","length","undefined","Object","classCallCheck","this","controller","AbortController","signal","request","fetch","data","method","headers","Content-Type","body","JSON","stringify","callback","then","response","json","catch","console","log","abort","ShoppingCart","storageString","localStorage","getItem","parse","shoppingCartProducts","setItem","setCurrentProducts","orderRequest","post","Products","get","Units","AddItemFormComponent","props","_this","possibleConstructorReturn","getPrototypeOf","call","handleAddProduct","bind","assertThisInitialized","handleSelectedProductChanged","handleselectedUnitChanged","handleSelectedAmountChanged","unselectedUnit","id","name","unselectedProduct","units","state","selectedProduct","selectedAmount","selectedUnit","allProducts","allUnits","M","window","elems","document","querySelectorAll","FormSelect","products","setState","_this2","initializeDropDowns","productsQuery","getAll","whenDataArrives","updateProducts","unitsQuery","updateUnits","event","preventDefault","productRequest","product","amount","unit","addProduct","selectedProductId","parseInt","target","value","find","selectedUnitId","addDisabled","isValidProductRequest","react_default","a","createElement","onSubmit","className","onChange","renderAvailableProducts","type","renderAvailableUnits","concat","map","disabled","key","React","Component","ShoppingCartComponent","renderProducts","selectedProducts","i","removeButton","onRemoveClicked","onClick","index","ProductsRequestComponent","goToCheckout","handleRemoveProduct","getCurrentProducts","checkout","shoppingCart","newProducts","_ref","filter","item","react_router","to","checkoutButtonDisabled","Fragment","components_AddItemFormComponent","components_ShoppingCartComponent","CheckoutComponent","handlePhoneNumberChanged","handleNameChanged","handleLastNameChanged","sendProductsOrder","handleOrderConfirmation","lastName","phoneNumber","goToShoppingCart","trim","query","createProductsOrder","clear","sendButtonDisabled","isValidForm","App","react_router_dom","href","path","exact","component","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.f63e279b.chunk.js","sourcesContent":["/**\n * A cancelable request to a server.\n *\n * Example:\n *      const query = RemoteQuery.get('/users')\n *          .whenDataArrives( (response) => {\n *              // ... do something with response.data\n *          })\n *\n *  The query can be canceled with:\n *\n *      query.abort()\n */\nclass RemoteQuery\n{\n    static post(url, data) {\n        return new RemoteQuery(url, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n        })\n    }\n\n    static get(url, init) {\n        return new RemoteQuery(url, init)\n    }\n\n    constructor(url, init = {}) {\n        this.controller = new AbortController()\n\n        init.signal = this.controller.signal\n\n        this.request = fetch(url, init)\n    }\n\n    whenDataArrives(callback) {\n        this.request\n            .then((response) => {\n                return response.json()\n            })\n            .then( (response) => {\n                callback(response)\n            }).catch( (response) => {\n                console.log(response)\n            })\n\n        return this\n    }\n\n    abort() {\n        this.controller.abort()\n    }\n}\n\nexport default RemoteQuery","import RemoteQuery from './RemoteQuery'\n\nclass ShoppingCart\n{\n    static getCurrentProducts() {\n        const storageString = localStorage.getItem('shoppingCartProducts')\n\n        return JSON.parse(storageString)\n    }\n\n    static setCurrentProducts(shoppingCartProducts) {\n        const storageString = JSON.stringify(shoppingCartProducts)\n\n        localStorage.setItem('shoppingCartProducts', storageString)\n    }\n\n    static clear() {\n        this.setCurrentProducts([])\n    }\n\n    static createProductsOrder(orderRequest) {\n        const url = '/apiv1/shopping-cart/create-order'\n\n        return RemoteQuery.post(url, orderRequest)\n    }\n}\n\nexport default ShoppingCart","import RemoteQuery from './RemoteQuery'\n\nclass Products\n{\n    static getAll() {\n        const url = '/apiv1/products'\n\n        return RemoteQuery.get(url)\n    }\n}\n\nexport default Products","import RemoteQuery from './RemoteQuery'\n\nclass Units\n{\n    static getAll() {\n        const url = '/apiv1/units'\n\n        return RemoteQuery.get(url)\n    }\n}\n\nexport default Units","import React from 'react'\nimport Products from '../queries/Products'\nimport Units from '../queries/Units'\n\nclass AddItemFormComponent extends React.Component {\n    /// Initializing\n\n    constructor(props) {\n        super(props)\n    \n        // Handlers\n\n        this.handleAddProduct = this.handleAddProduct.bind(this)\n        this.handleSelectedProductChanged = this.handleSelectedProductChanged.bind(this)\n        this.handleselectedUnitChanged = this.handleselectedUnitChanged.bind(this)\n        this.handleSelectedAmountChanged = this.handleSelectedAmountChanged.bind(this)\n\n        // Constants\n        \n        this.unselectedUnit = {id: 0, name: ''}\n        this.unselectedProduct = {id: 0, name: '', units: []}\n        \n        this.state = {\n            selectedProduct: this.unselectedProduct,\n            selectedAmount: 0,\n            selectedUnit: this.unselectedUnit,\n            allProducts: [],\n            allUnits: [],\n        }\n    }\n\n    initializeDropDowns() {\n        const M = window.M\n\n        const elems = document.querySelectorAll('select')\n        M.FormSelect.init(elems)\n    }\n\n    updateProducts(products) {\n        this.setState({\n            allProducts: products\n        })\n    }\n\n    updateUnits(units) {\n        this.setState({\n            allUnits: units\n        })\n    }\n\n    /// Events\n\n    componentDidMount() {\n        this.initializeDropDowns()\n\n        this.productsQuery = Products.getAll()\n            .whenDataArrives( (data) => {\n                this.updateProducts(data.products)\n            })\n\n        this.unitsQuery = Units.getAll()\n            .whenDataArrives( (data) => {\n                this.updateUnits(data.units)\n            })\n    }\n\n    componentDidUpdate() {\n        this.initializeDropDowns()\n    }\n\n    componentWillUnmount() {\n        this.productsQuery.abort()\n    }\n\n    handleAddProduct(event) {\n        event.preventDefault()\n\n        const productRequest = {\n            product: this.state.selectedProduct,\n            amount: this.state.selectedAmount,\n            unit: this.state.selectedUnit,\n        }\n        \n        this.props.addProduct(productRequest)\n    }\n    \n    handleSelectedProductChanged(event) {\n        const selectedProductId = parseInt(event.target.value)\n        \n        let selectedProduct = this.state.allProducts.find( (product) => {\n            return product.id === selectedProductId\n        })\n\n        if(selectedProduct === undefined) {\n            selectedProduct = this.unselectedProduct\n        }\n\n        this.setState({\n            selectedProduct: selectedProduct,\n            selectedUnit: this.unselectedUnit,\n        })\n    }\n\n    handleSelectedAmountChanged(event) {\n        const selectedAmount = parseInt(event.target.value)\n\n        this.setState({\n            selectedAmount: selectedAmount\n        })\n    }\n\n    handleselectedUnitChanged(event) {\n        const selectedUnitId = parseInt(event.target.value)\n\n        let selectedUnit = this.state.allUnits.find( (unit) => {\n            return unit.id === selectedUnitId\n        })\n\n        if(selectedUnit === undefined) {\n            selectedUnit = this.unselectedUnit\n        }\n\n        this.setState({\n            selectedUnit: selectedUnit\n        })\n    }\n\n    /// Rendering\n\n    isValidProductRequest() {\n        return  this.state.selectedProduct.id !== 0 &&\n                this.state.selectedUnit.id !== 0 &&\n                this.state.selectedAmount > 0\n    }\n\n    render() {\n        const selectedProduct = this.state.selectedProduct\n        const selectedUnit = this.state.selectedUnit\n        const addDisabled = this.isValidProductRequest() ? '' : ' disabled'\n\n        return (\n            <form onSubmit={this.handleAddProduct}>\n                <div className=\"row\">\n                    <div className=\"input-field col s6\">\n                        <select value={selectedProduct.id} onChange={this.handleSelectedProductChanged} >\n                            {this.renderAvailableProducts()}\n                        </select>\n\n                        <label>Producto</label>\n                    </div>\n\n                    <div className=\"input-field col s2\">\n                        <input \n                            value={this.state.selectedAmount}\n                            type=\"number\"\n                            className=\"validate\"\n                            onChange={this.handleSelectedAmountChanged}\n                        />\n                      \n                        <label className=\"active\">Cantidad</label>\n                    </div>\n\n                    <div className=\"input-field col s3\">\n                        <select value={selectedUnit.id} onChange={this.handleselectedUnitChanged} >\n                            {this.renderAvailableUnits()}\n                        </select>\n\n                        <label>Unidad</label>\n                    </div>\n                </div>\n\n\n                <div className=\"row\">\n                    <div className=\"col s12 right-align\">\n                        <button\n                            className={\"btn waves-effect waves-light\" + addDisabled} \n                            type=\"submit\"\n                        >\n                            Agregar al pedido\n                        </button>\n                    </div>\n                </div>\n              </form>\n        )\n    }\n\n    renderAvailableProducts() {\n        const availableProducts = [this.unselectedProduct].concat(this.state.allProducts)\n\n        return availableProducts.map( (product) => {    \n            const disabled = product.id === 0\n\n            return <option key={product.id} value={product.id} disabled={disabled} >{product.name}</option>\n        })\n    }\n\n    renderAvailableUnits() {\n        const availableUnits = [this.unselectedUnit].concat(this.state.selectedProduct.units)\n\n        return availableUnits.map( (unit) => {\n            const disabled = unit.id === 0\n\n            return (\n                <option \n                    key={unit.id}\n                    value={unit.id}\n                    disabled={disabled}\n                >\n                    {unit.name}\n                </option>\n            )\n        })\n    }\n}\n\nexport default AddItemFormComponent","import React from 'react'\n\nclass ShoppingCartComponent extends React.Component {\n    /// Rendering\n    \n    render() {\n        return (\n            <table>\n                <thead>\n                    <tr>\n                        <th>Producto</th>\n                        <th>Cantidad</th>\n                        <th></th>\n                    </tr>\n                </thead>\n\n                <tbody>\n                    {this.renderProducts()}\n                </tbody>\n            </table>\n        )\n    }\n\n    renderProducts() {\n        return this.props.selectedProducts.map( (productRequest, i) => {\n            const removeButton = this.props.onRemoveClicked === undefined ? '' :\n                <a className=\"btn-small waves-effect waves-light red\" onClick={() => this.props.onRemoveClicked({index: i})}><i className=\"material-icons center\">remove_circle</i></a>\n    \n            return (\n                <tr key={i}>\n                    <td>{productRequest.product.name}</td>\n                    <td>{productRequest.amount} {productRequest.unit.name}</td>\n                    <td>\n                        {removeButton}\n                    </td>\n                </tr>\n            )\n        })\n    }\n}\n\nexport default ShoppingCartComponent","import React from 'react'\nimport { Redirect } from 'react-router'\nimport ShoppingCart from '../queries/ShoppingCart'\nimport AddItemFormComponent from './AddItemFormComponent'\nimport ShoppingCartComponent from './ShoppingCartComponent'\n\nclass ProductsRequestComponent extends React.Component {\n    \n    /// Initializing\n\n    constructor(props) {\n        super(props)\n\n        this.addProduct = this.addProduct.bind(this)\n        this.goToCheckout = this.goToCheckout.bind(this)\n        this.handleRemoveProduct = this.handleRemoveProduct.bind(this)\n\n        const selectedProducts = ShoppingCart.getCurrentProducts()\n\n        this.state = {\n            selectedProducts: selectedProducts === null ? [] : selectedProducts,\n            checkout: false,\n        }\n    }\n\n    /// Events\n\n    updateShoppingCart(shoppingCart) {\n       this.setState({\n            selectedProducts: shoppingCart.products\n        }) \n    }\n\n    addProduct(productRequest) {\n        const newProducts = this.state.selectedProducts.concat([productRequest])\n\n        ShoppingCart.setCurrentProducts(newProducts)\n\n        this.setState({\n            selectedProducts: newProducts\n        })\n    }\n\n    goToCheckout() {\n        this.setState({\n            checkout: true\n        })\n    }\n\n    handleRemoveProduct({index: index}) {\n        const newProducts = this.state.selectedProducts.filter( (item, i) => {\n            return i !== index\n        })\n\n        console.log(this.state.selectedProducts)\n        console.log(index)\n        console.log(newProducts)\n\n        ShoppingCart.setCurrentProducts(newProducts)\n\n        this.setState({\n            selectedProducts: newProducts\n        })\n    }\n\n    /// Rendering\n\n    render() {\n        if(this.state.checkout === true) {\n            return <Redirect to=\"/checkout\"/>\n        }\n\n        const checkoutButtonDisabled = this.state.selectedProducts.length > 0 ? '' : ' disabled'\n\n        return (\n            <React.Fragment>\n                <div className=\"row\">\n                    <div className=\"col s12\">\n                        <h5 className=\"center-align\">Hacé tu pedido.</h5>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"offset-s2 col s8\">\n                        <AddItemFormComponent\n                            addProduct={this.addProduct}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"offset-s2 col s8\">\n                        <ShoppingCartComponent\n                            selectedProducts={this.state.selectedProducts}\n                            onRemoveClicked={this.handleRemoveProduct}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col s12 right-align\">\n                        <button\n                            className={\"btn waves-effect waves-light\" + checkoutButtonDisabled}\n                            onClick={this.goToCheckout}\n                        >\n                            Hacer el pedido\n                        </button>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n}\n\nexport default ProductsRequestComponent","import React from 'react'\nimport { Redirect } from 'react-router'\nimport ShoppingCartComponent from './ShoppingCartComponent'\nimport ShoppingCart from '../queries/ShoppingCart'\n\nclass CheckoutComponent extends React.Component {\n    /// Initializing\n\n    constructor(props) {\n        super(props)\n\n        this.selectedProducts = ShoppingCart.getCurrentProducts()\n\n        this.handlePhoneNumberChanged = this.handlePhoneNumberChanged.bind(this)\n        this.handleNameChanged = this.handleNameChanged.bind(this)\n        this.handleLastNameChanged = this.handleLastNameChanged.bind(this)\n        this.sendProductsOrder = this.sendProductsOrder.bind(this)\n        this.handleOrderConfirmation = this.handleOrderConfirmation.bind(this)\n\n        this.state = {\n            name: '',\n            lastName: '',\n            phoneNumber: '',\n            goToShoppingCart: false,\n        }\n    }\n\n    /// Events\n\n    handleNameChanged(event) {\n        const name = event.target.value.trim()\n\n        this.setState({\n            name: name\n        })\n    }\n\n    handleLastNameChanged(event) {\n        const lastName = event.target.value.trim()\n\n        this.setState({\n            lastName: lastName\n        })\n    }\n\n    handlePhoneNumberChanged(event) {\n        const phoneNumber = event.target.value.trim()\n\n        this.setState({\n            phoneNumber: phoneNumber\n        })\n    }\n\n    sendProductsOrder() {\n        this.query = ShoppingCart.createProductsOrder({\n            name: this.state.name,\n            lastName: this.state.lastName,\n            phoneNumber: this.state.phoneNumber,\n            selectedProducts: this.selectedProducts,\n        }).whenDataArrives(this.handleOrderConfirmation)\n    }\n\n    handleOrderConfirmation(data) {\n        this.query = undefined\n        \n        ShoppingCart.clear()\n\n        this.setState({\n            goToShoppingCart: true,\n        })\n    }\n\n    componentWillUnmount() {\n        if(this.query !== undefined) {\n            this.query.abort()\n            this.query = undefined\n        }\n    }\n\n    /// Rendering\n\n    isValidForm() {\n        return (\n            this.state.name.length > 0\n            &&\n            this.state.lastName.length > 0\n            &&\n            this.state.phoneNumber.length > 0            \n        )\n    }\n\n    render() {\n        if(this.state.goToShoppingCart === true) {\n            return <Redirect to=\"/\"/>\n        }\n\n        const sendButtonDisabled = this.isValidForm() ? '' : ' disabled'\n\n        return (\n            <React.Fragment>\n                <div className=\"row\">\n                    <div className=\"col s12\">\n                        <h5 className=\"center-align\">Confirmá tu pedido.</h5>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"offset-s2 col s8\">\n                        <ShoppingCartComponent\n                            selectedProducts={this.selectedProducts}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"offset-s2 col s8\">\n                        <b className=\"left-align\">Datos del pedido.</b>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"input-field offset-s2 col s4\">\n                        <input \n                            value={this.state.name}\n                            type=\"text\"\n                            className={'validate'}\n                            onChange={this.handleNameChanged}\n                        />\n                      \n                        <label className=\"active\">Nombre</label>\n                    </div>\n\n                    <div className=\"input-field col s4\">\n                        <input \n                            value={this.state.lastName}\n                            type=\"text\"\n                            className={'validate'}\n                            onChange={this.handleLastNameChanged}\n                        />\n                      \n                        <label className=\"active\">Apellido</label>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"input-field offset-s2 col s8\">\n                        <input \n                            value={this.state.phoneNumber}\n                            type=\"text\"\n                            className={'validate'}\n                            onChange={this.handlePhoneNumberChanged}\n                        />\n                      \n                        <label className=\"active\">Teléfono</label>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col s12 right-align\">\n                        <button\n                            className={\"btn waves-effect waves-light\" + sendButtonDisabled}\n                            onClick={this.sendProductsOrder}\n                        >\n                            Confirmar el pedido\n                        </button>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n}\n\nexport default CheckoutComponent","import React from 'react'\nimport './App.css'\nimport { BrowserRouter as Router, Route } from \"react-router-dom\"\nimport ProductsRequestComponent from './components/ProductsRequestComponent'\nimport CheckoutComponent from './components/CheckoutComponent'\n\nfunction App() {\n    return (\n        <Router>\n\n            <div>\n                <nav>\n                    <div className=\"nav-wrapper\">\n                        <a href=\"/\" className=\"brand-logo center\">Pedidos</a>\n                    </div>\n                </nav>\n                \n                <div id=\"main-container\" className=\"container\">\n\n                    <Route path=\"/\" exact component={ProductsRequestComponent} />\n                    \n                    <Route path=\"/checkout/\" component={CheckoutComponent}/>\n            \n                </div>\n            </div>\n        </Router>\n    )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}